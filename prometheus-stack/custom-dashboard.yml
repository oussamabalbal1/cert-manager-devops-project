# Inject dashboard data within a config map has grafana_dashboard: "1" label
# later will upgrade kube-prometheus-stack with this config
# Finally kube-prometheus-stack will import the costumized dashboard
apiVersion: v1
kind: ConfigMap
metadata:
  name: custom-dashboard
  labels:
    grafana_dashboard: "1"  # This label is important!
data:
  dashboard-k8s.json: |-
                        {
                        "annotations": {
                            "list": [
                            {
                                "builtIn": 1,
                                "datasource": {
                                "type": "datasource",
                                "uid": "grafana"
                                },
                                "enable": true,
                                "hide": true,
                                "iconColor": "rgba(0, 211, 255, 1)",
                                "name": "Annotations & Alerts",
                                "target": {
                                "limit": 100,
                                "matchAny": false,
                                "tags": [],
                                "type": "dashboard"
                                },
                                "type": "dashboard"
                            },
                            {
                                "datasource": {
                                "type": "datasource",
                                "uid": "grafana"
                                },
                                "enable": true,
                                "hide": false,
                                "iconColor": "#5c4ee5",
                                "name": "terraform",
                                "target": {
                                "limit": 100,
                                "matchAny": false,
                                "tags": [
                                    "terraform"
                                ],
                                "type": "tags"
                                }
                            },
                            {
                                "datasource": {
                                "type": "datasource",
                                "uid": "grafana"
                                },
                                "enable": true,
                                "hide": false,
                                "iconColor": "red",
                                "name": "oncall",
                                "target": {
                                "limit": 100,
                                "matchAny": false,
                                "tags": [
                                    "oncall"
                                ],
                                "type": "tags"
                                }
                            }
                            ]
                        },
                        "description": "This is a modern 'Global View' dashboard for your Kubernetes cluster(s). Made for kube-prometheus-stack and take advantage of the latest Grafana features. GitHub repository: https://github.com/dotdc/grafana-dashboards-kubernetes",
                        "editable": true,
                        "fiscalYearStartMonth": 0,
                        "graphTooltip": 1,
                        "links": [],
                        "liveNow": false,
                        "panels": [
                            {
                            "collapsed": false,
                            "gridPos": {
                                "h": 1,
                                "w": 24,
                                "x": 0,
                                "y": 0
                            },
                            "id": 82,
                            "panels": [],
                            "title": "Production",
                            "type": "row"
                            },
                            {
                            "datasource": {
                                "type": "prometheus",
                                "uid": "${datasource}"
                            },
                            "fieldConfig": {
                                "defaults": {
                                "color": {
                                    "mode": "palette-classic"
                                },
                                "custom": {
                                    "axisCenteredZero": false,
                                    "axisColorMode": "text",
                                    "axisLabel": "Users",
                                    "axisPlacement": "auto",
                                    "barAlignment": 0,
                                    "drawStyle": "line",
                                    "fillOpacity": 37,
                                    "gradientMode": "opacity",
                                    "hideFrom": {
                                    "legend": false,
                                    "tooltip": false,
                                    "viz": false
                                    },
                                    "lineInterpolation": "linear",
                                    "lineStyle": {
                                    "fill": "solid"
                                    },
                                    "lineWidth": 2,
                                    "pointSize": 5,
                                    "scaleDistribution": {
                                    "type": "linear"
                                    },
                                    "showPoints": "never",
                                    "spanNulls": false,
                                    "stacking": {
                                    "group": "A",
                                    "mode": "none"
                                    },
                                    "thresholdsStyle": {
                                    "mode": "off"
                                    }
                                },
                                "mappings": [],
                                "thresholds": {
                                    "mode": "absolute",
                                    "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    },
                                    {
                                        "color": "red",
                                        "value": 80
                                    }
                                    ]
                                },
                                "unit": "none"
                                },
                                "overrides": []
                            },
                            "gridPos": {
                                "h": 5,
                                "w": 9,
                                "x": 0,
                                "y": 1
                            },
                            "id": 92,
                            "options": {
                                "legend": {
                                "calcs": [
                                    "min",
                                    "max",
                                    "mean"
                                ],
                                "displayMode": "table",
                                "placement": "right",
                                "showLegend": false,
                                "sortBy": "Max",
                                "sortDesc": true
                                },
                                "tooltip": {
                                "hideZeros": false,
                                "mode": "single",
                                "sort": "none"
                                }
                            },
                            "pluginVersion": "9.5.3",
                            "targets": [
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "${datasource}"
                                },
                                "editorMode": "code",
                                "expr": "pg_stat_user_tables_n_live_tup{datname=\"oussama\", relname=\"user\", schemaname=\"public\"}",
                                "hide": false,
                                "legendFormat": "__auto",
                                "range": true,
                                "refId": "A"
                                }
                            ],
                            "title": "Registered Users in Database",
                            "type": "timeseries"
                            },
                            {
                            "datasource": {
                                "type": "prometheus",
                                "uid": "${datasource}"
                            },
                            "fieldConfig": {
                                "defaults": {
                                "color": {
                                    "mode": "thresholds"
                                },
                                "mappings": [],
                                "thresholds": {
                                    "mode": "absolute",
                                    "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    },
                                    {
                                        "color": "red",
                                        "value": 100000000
                                    }
                                    ]
                                },
                                "unit": "decbytes"
                                },
                                "overrides": []
                            },
                            "gridPos": {
                                "h": 9,
                                "w": 3,
                                "x": 9,
                                "y": 1
                            },
                            "id": 93,
                            "options": {
                                "colorMode": "value",
                                "graphMode": "area",
                                "justifyMode": "auto",
                                "orientation": "auto",
                                "reduceOptions": {
                                "calcs": [
                                    "lastNotNull"
                                ],
                                "fields": "",
                                "values": false
                                },
                                "textMode": "auto"
                            },
                            "pluginVersion": "9.5.3",
                            "targets": [
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "${datasource}"
                                },
                                "editorMode": "code",
                                "expr": "pg_database_size_bytes{datname=\"oussama\"}",
                                "hide": false,
                                "legendFormat": "__auto",
                                "range": true,
                                "refId": "A"
                                }
                            ],
                            "title": "Database Size",
                            "type": "stat"
                            },
                            {
                            "datasource": {
                                "type": "prometheus",
                                "uid": "${datasource}"
                            },
                            "fieldConfig": {
                                "defaults": {
                                "color": {
                                    "mode": "thresholds"
                                },
                                "mappings": [],
                                "thresholds": {
                                    "mode": "absolute",
                                    "steps": [
                                    {
                                        "color": "yellow",
                                        "value": null
                                    }
                                    ]
                                },
                                "unit": "none"
                                },
                                "overrides": []
                            },
                            "gridPos": {
                                "h": 5,
                                "w": 3,
                                "x": 12,
                                "y": 1
                            },
                            "id": 95,
                            "options": {
                                "colorMode": "value",
                                "graphMode": "area",
                                "justifyMode": "auto",
                                "orientation": "auto",
                                "reduceOptions": {
                                "calcs": [
                                    "lastNotNull"
                                ],
                                "fields": "",
                                "values": false
                                },
                                "textMode": "auto"
                            },
                            "pluginVersion": "9.5.3",
                            "targets": [
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "${datasource}"
                                },
                                "editorMode": "code",
                                "expr": "pg_stat_database_numbackends{datname=\"oussama\"}",
                                "hide": false,
                                "legendFormat": "__auto",
                                "range": true,
                                "refId": "A"
                                }
                            ],
                            "title": "Active Connections",
                            "type": "stat"
                            },
                            {
                            "datasource": {
                                "type": "prometheus",
                                "uid": "prometheus"
                            },
                            "description": "",
                            "fieldConfig": {
                                "defaults": {
                                "color": {
                                    "mode": "palette-classic"
                                },
                                "custom": {
                                    "axisCenteredZero": false,
                                    "axisColorMode": "text",
                                    "axisLabel": "",
                                    "axisPlacement": "auto",
                                    "barAlignment": 0,
                                    "drawStyle": "line",
                                    "fillOpacity": 0,
                                    "gradientMode": "none",
                                    "hideFrom": {
                                    "legend": false,
                                    "tooltip": false,
                                    "viz": false
                                    },
                                    "lineInterpolation": "linear",
                                    "lineWidth": 1,
                                    "pointSize": 5,
                                    "scaleDistribution": {
                                    "type": "linear"
                                    },
                                    "showPoints": "auto",
                                    "spanNulls": false,
                                    "stacking": {
                                    "group": "A",
                                    "mode": "none"
                                    },
                                    "thresholdsStyle": {
                                    "mode": "off"
                                    }
                                },
                                "mappings": [],
                                "noValue": "0",
                                "thresholds": {
                                    "mode": "absolute",
                                    "steps": [
                                    {
                                        "color": "dark-red",
                                        "value": null
                                    },
                                    {
                                        "color": "orange",
                                        "value": 2
                                    },
                                    {
                                        "color": "green",
                                        "value": 3
                                    }
                                    ]
                                }
                                },
                                "overrides": []
                            },
                            "gridPos": {
                                "h": 9,
                                "w": 3,
                                "x": 15,
                                "y": 1
                            },
                            "id": 97,
                            "options": {
                                "legend": {
                                "calcs": [],
                                "displayMode": "list",
                                "placement": "bottom",
                                "showLegend": false
                                },
                                "tooltip": {
                                "mode": "single",
                                "sort": "none"
                                }
                            },
                            "pluginVersion": "9.5.3",
                            "targets": [
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "prometheus"
                                },
                                "editorMode": "code",
                                "expr": "sum(http_requests_total{route!=\"/metrics\"})",
                                "legendFormat": "__auto",
                                "range": true,
                                "refId": "A"
                                }
                            ],
                            "title": "Total HTTP Requests",
                            "type": "timeseries"
                            },
                            {
                            "datasource": {
                                "type": "prometheus",
                                "uid": "prometheus"
                            },
                            "description": "",
                            "fieldConfig": {
                                "defaults": {
                                "color": {
                                    "mode": "thresholds"
                                },
                                "mappings": [],
                                "noValue": "0",
                                "thresholds": {
                                    "mode": "absolute",
                                    "steps": [
                                    {
                                        "color": "dark-red",
                                        "value": null
                                    },
                                    {
                                        "color": "orange",
                                        "value": 2
                                    },
                                    {
                                        "color": "green",
                                        "value": 3
                                    }
                                    ]
                                }
                                },
                                "overrides": []
                            },
                            "gridPos": {
                                "h": 5,
                                "w": 3,
                                "x": 18,
                                "y": 1
                            },
                            "id": 89,
                            "options": {
                                "colorMode": "value",
                                "graphMode": "area",
                                "justifyMode": "auto",
                                "orientation": "auto",
                                "reduceOptions": {
                                "calcs": [
                                    "lastNotNull"
                                ],
                                "fields": "",
                                "values": false
                                },
                                "textMode": "auto"
                            },
                            "pluginVersion": "9.5.3",
                            "targets": [
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "prometheus"
                                },
                                "editorMode": "code",
                                "expr": "sum by(namespace) (\r\n  kube_pod_status_phase{\r\n    phase=\"Running\",\r\n    namespace=\"production\",\r\n    pod=~\"nestjs-.*\"\r\n  } == 1\r\n)",
                                "legendFormat": "__auto",
                                "range": true,
                                "refId": "A"
                                }
                            ],
                            "title": "Running Application Pods",
                            "type": "stat"
                            },
                            {
                            "datasource": {
                                "type": "prometheus",
                                "uid": "prometheus"
                            },
                            "description": "",
                            "fieldConfig": {
                                "defaults": {
                                "color": {
                                    "mode": "thresholds"
                                },
                                "mappings": [],
                                "noValue": "0",
                                "thresholds": {
                                    "mode": "absolute",
                                    "steps": [
                                    {
                                        "color": "dark-red",
                                        "value": null
                                    },
                                    {
                                        "color": "orange",
                                        "value": 2
                                    },
                                    {
                                        "color": "green",
                                        "value": 3
                                    }
                                    ]
                                }
                                },
                                "overrides": []
                            },
                            "gridPos": {
                                "h": 5,
                                "w": 3,
                                "x": 21,
                                "y": 1
                            },
                            "id": 88,
                            "options": {
                                "colorMode": "value",
                                "graphMode": "area",
                                "justifyMode": "auto",
                                "orientation": "auto",
                                "reduceOptions": {
                                "calcs": [
                                    "lastNotNull"
                                ],
                                "fields": "",
                                "values": false
                                },
                                "textMode": "auto"
                            },
                            "pluginVersion": "9.5.3",
                            "targets": [
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "prometheus"
                                },
                                "editorMode": "code",
                                "expr": "sum by(namespace) (\r\n  kube_pod_status_phase{\r\n    phase=\"Running\",\r\n    namespace=\"production\",\r\n    pod=~\"postgres-.*\"\r\n  } == 1\r\n)",
                                "legendFormat": "__auto",
                                "range": true,
                                "refId": "A"
                                }
                            ],
                            "title": "Running Database Pods",
                            "type": "stat"
                            },
                            {
                            "datasource": {
                                "type": "prometheus",
                                "uid": "${datasource}"
                            },
                            "fieldConfig": {
                                "defaults": {
                                "color": {
                                    "mode": "thresholds"
                                },
                                "custom": {
                                    "align": "auto",
                                    "cellOptions": {
                                    "type": "auto"
                                    },
                                    "inspect": false
                                },
                                "mappings": [],
                                "thresholds": {
                                    "mode": "absolute",
                                    "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    },
                                    {
                                        "color": "red",
                                        "value": 80
                                    }
                                    ]
                                }
                                },
                                "overrides": [
                                {
                                    "matcher": {
                                    "id": "byName",
                                    "options": "Time"
                                    },
                                    "properties": [
                                    {
                                        "id": "displayName",
                                        "value": "Time"
                                    },
                                    {
                                        "id": "custom.align"
                                    }
                                    ]
                                },
                                {
                                    "matcher": {
                                    "id": "byName",
                                    "options": "Value"
                                    },
                                    "properties": [
                                    {
                                        "id": "displayName",
                                        "value": "Time Left"
                                    },
                                    {
                                        "id": "unit",
                                        "value": "dtdurations"
                                    },
                                    {
                                        "id": "decimals",
                                        "value": 2
                                    },
                                    {
                                        "id": "custom.cellOptions",
                                        "value": {
                                        "type": "color-background"
                                        }
                                    },
                                    {
                                        "id": "custom.align"
                                    },
                                    {
                                        "id": "thresholds",
                                        "value": {
                                        "mode": "absolute",
                                        "steps": [
                                            {
                                            "color": "rgba(245, 54, 54, 0.9)",
                                            "value": null
                                            },
                                            {
                                            "color": "rgba(237, 129, 40, 0.89)",
                                            "value": 2592000
                                            },
                                            {
                                            "color": "rgba(50, 172, 45, 0.97)",
                                            "value": 5184000
                                            },
                                            {
                                            "value": 7776000
                                            }
                                        ]
                                        }
                                    }
                                    ]
                                },
                                {
                                    "matcher": {
                                    "id": "byName",
                                    "options": "Metric"
                                    },
                                    "properties": [
                                    {
                                        "id": "displayName",
                                        "value": "Certificate"
                                    },
                                    {
                                        "id": "unit",
                                        "value": "short"
                                    },
                                    {
                                        "id": "decimals",
                                        "value": 2
                                    },
                                    {
                                        "id": "custom.align"
                                    }
                                    ]
                                }
                                ]
                            },
                            "gridPos": {
                                "h": 4,
                                "w": 9,
                                "x": 0,
                                "y": 6
                            },
                            "id": 86,
                            "options": {
                                "cellHeight": "sm",
                                "footer": {
                                "countRows": false,
                                "fields": "",
                                "reducer": [
                                    "sum"
                                ],
                                "show": false
                                },
                                "showHeader": true,
                                "sortBy": []
                            },
                            "pluginVersion": "9.5.3",
                            "targets": [
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "${datasource}"
                                },
                                "editorMode": "code",
                                "expr": "sort_desc( sum(certmanager_certificate_expiration_timestamp_seconds{exported_namespace=~\"production\"} - time()) by (name,exported_namespace) )",
                                "format": "table",
                                "instant": true,
                                "legendFormat": " {{exported_namespace}} / {{name}}",
                                "refId": "A"
                                }
                            ],
                            "title": "Certificates Time Left",
                            "transformations": [
                                {
                                "id": "seriesToRows",
                                "options": {
                                    "reducers": []
                                }
                                }
                            ],
                            "type": "table"
                            },
                            {
                            "datasource": {
                                "type": "prometheus",
                                "uid": "${datasource}"
                            },
                            "fieldConfig": {
                                "defaults": {
                                "color": {
                                    "mode": "thresholds"
                                },
                                "mappings": [],
                                "thresholds": {
                                    "mode": "absolute",
                                    "steps": [
                                    {
                                        "color": "red",
                                        "value": null
                                    },
                                    {
                                        "color": "green",
                                        "value": 1
                                    }
                                    ]
                                },
                                "unit": "bool_yes_no"
                                },
                                "overrides": []
                            },
                            "gridPos": {
                                "h": 4,
                                "w": 3,
                                "x": 12,
                                "y": 6
                            },
                            "id": 94,
                            "options": {
                                "colorMode": "value",
                                "graphMode": "none",
                                "justifyMode": "auto",
                                "orientation": "auto",
                                "reduceOptions": {
                                "calcs": [
                                    "lastNotNull"
                                ],
                                "fields": "",
                                "values": false
                                },
                                "textMode": "auto"
                            },
                            "pluginVersion": "9.5.3",
                            "targets": [
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "${datasource}"
                                },
                                "editorMode": "code",
                                "expr": "pg_up",
                                "hide": false,
                                "legendFormat": "__auto",
                                "range": true,
                                "refId": "A"
                                }
                            ],
                            "title": "Exporter Health",
                            "type": "stat"
                            },
                            {
                            "datasource": {
                                "type": "prometheus",
                                "uid": "prometheus"
                            },
                            "description": "",
                            "fieldConfig": {
                                "defaults": {
                                "mappings": [],
                                "noValue": "0",
                                "thresholds": {
                                    "mode": "absolute",
                                    "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    },
                                    {
                                        "color": "red",
                                        "value": 80
                                    }
                                    ]
                                },
                                "unit": "short"
                                },
                                "overrides": []
                            },
                            "gridPos": {
                                "h": 4,
                                "w": 2,
                                "x": 18,
                                "y": 6
                            },
                            "id": 96,
                            "options": {
                                "colorMode": "value",
                                "graphMode": "none",
                                "justifyMode": "auto",
                                "orientation": "auto",
                                "reduceOptions": {
                                "calcs": [
                                    "lastNotNull"
                                ],
                                "fields": "",
                                "values": false
                                },
                                "textMode": "auto"
                            },
                            "pluginVersion": "9.5.3",
                            "targets": [
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "prometheus"
                                },
                                "editorMode": "code",
                                "expr": "sum(http_requests_total{method=\"POST\",route=\"/users\"})",
                                "legendFormat": "__auto",
                                "range": true,
                                "refId": "A"
                                }
                            ],
                            "title": "POST \"/users\"",
                            "type": "stat"
                            },
                            {
                            "datasource": {
                                "type": "prometheus",
                                "uid": "prometheus"
                            },
                            "description": "",
                            "fieldConfig": {
                                "defaults": {
                                "mappings": [],
                                "noValue": "0",
                                "thresholds": {
                                    "mode": "absolute",
                                    "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    },
                                    {
                                        "color": "red",
                                        "value": 80
                                    }
                                    ]
                                },
                                "unit": "short"
                                },
                                "overrides": []
                            },
                            "gridPos": {
                                "h": 4,
                                "w": 2,
                                "x": 20,
                                "y": 6
                            },
                            "id": 90,
                            "options": {
                                "colorMode": "value",
                                "graphMode": "none",
                                "justifyMode": "auto",
                                "orientation": "auto",
                                "reduceOptions": {
                                "calcs": [
                                    "lastNotNull"
                                ],
                                "fields": "",
                                "values": false
                                },
                                "textMode": "auto"
                            },
                            "pluginVersion": "9.5.3",
                            "targets": [
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "prometheus"
                                },
                                "editorMode": "code",
                                "expr": "sum(http_requests_total{method=\"GET\",route=\"/\"})",
                                "legendFormat": "__auto",
                                "range": true,
                                "refId": "A"
                                }
                            ],
                            "title": "GET \"/\"",
                            "type": "stat"
                            },
                            {
                            "datasource": {
                                "type": "prometheus",
                                "uid": "prometheus"
                            },
                            "description": "",
                            "fieldConfig": {
                                "defaults": {
                                "mappings": [],
                                "noValue": "0",
                                "thresholds": {
                                    "mode": "absolute",
                                    "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    },
                                    {
                                        "color": "red",
                                        "value": 80
                                    }
                                    ]
                                },
                                "unit": "short"
                                },
                                "overrides": []
                            },
                            "gridPos": {
                                "h": 4,
                                "w": 2,
                                "x": 22,
                                "y": 6
                            },
                            "id": 91,
                            "options": {
                                "colorMode": "value",
                                "graphMode": "none",
                                "justifyMode": "auto",
                                "orientation": "auto",
                                "reduceOptions": {
                                "calcs": [
                                    "lastNotNull"
                                ],
                                "fields": "",
                                "values": false
                                },
                                "textMode": "auto"
                            },
                            "pluginVersion": "9.5.3",
                            "targets": [
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "prometheus"
                                },
                                "editorMode": "code",
                                "expr": "sum(http_requests_total{method=\"GET\",route=\"/users\"})",
                                "legendFormat": "__auto",
                                "range": true,
                                "refId": "A"
                                }
                            ],
                            "title": "GET \"/users\"",
                            "type": "stat"
                            },
                            {
                            "collapsed": false,
                            "gridPos": {
                                "h": 1,
                                "w": 24,
                                "x": 0,
                                "y": 10
                            },
                            "id": 67,
                            "panels": [],
                            "title": "Overview",
                            "type": "row"
                            },
                            {
                            "datasource": {
                                "type": "prometheus",
                                "uid": "${datasource}"
                            },
                            "fieldConfig": {
                                "defaults": {
                                "color": {
                                    "mode": "continuous-GrYlRd"
                                },
                                "mappings": [],
                                "max": 1,
                                "min": 0,
                                "thresholds": {
                                    "mode": "absolute",
                                    "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    },
                                    {
                                        "color": "red",
                                        "value": 80
                                    }
                                    ]
                                },
                                "unit": "percentunit"
                                },
                                "overrides": []
                            },
                            "gridPos": {
                                "h": 6,
                                "w": 4,
                                "x": 0,
                                "y": 11
                            },
                            "id": 77,
                            "options": {
                                "displayMode": "lcd",
                                "legend": {
                                "calcs": [],
                                "displayMode": "list",
                                "placement": "bottom",
                                "showLegend": false
                                },
                                "maxVizHeight": 300,
                                "minVizHeight": 10,
                                "minVizWidth": 0,
                                "namePlacement": "auto",
                                "orientation": "horizontal",
                                "reduceOptions": {
                                "calcs": [
                                    "lastNotNull"
                                ],
                                "fields": "",
                                "values": false
                                },
                                "showUnfilled": true,
                                "sizing": "auto",
                                "valueMode": "color"
                            },
                            "pluginVersion": "9.5.3",
                            "targets": [
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "${datasource}"
                                },
                                "editorMode": "code",
                                "exemplar": true,
                                "expr": "avg(sum by (instance, cpu) (rate(node_cpu_seconds_total{mode!~\"idle|iowait|steal\", cluster=\"$cluster\", job=\"$job\"}[$__rate_interval])))",
                                "interval": "",
                                "legendFormat": "Real Linux",
                                "range": true,
                                "refId": "Real Linux"
                                },
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "${datasource}"
                                },
                                "editorMode": "code",
                                "exemplar": true,
                                "expr": "avg(sum by (core) (rate(windows_cpu_time_total{mode!=\"idle\", cluster=\"$cluster\"}[$__rate_interval])))",
                                "hide": false,
                                "interval": "",
                                "legendFormat": "Real Windows",
                                "range": true,
                                "refId": "Real Windows"
                                },
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "${datasource}"
                                },
                                "editorMode": "code",
                                "expr": "sum(kube_pod_container_resource_requests{resource=\"cpu\", cluster=\"$cluster\"}) / sum(machine_cpu_cores{cluster=\"$cluster\"})",
                                "hide": false,
                                "legendFormat": "Requests",
                                "range": true,
                                "refId": "Requests"
                                },
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "${datasource}"
                                },
                                "editorMode": "code",
                                "expr": "sum(kube_pod_container_resource_limits{resource=\"cpu\", cluster=\"$cluster\"}) / sum(machine_cpu_cores{cluster=\"$cluster\"})",
                                "hide": false,
                                "legendFormat": "Limits",
                                "range": true,
                                "refId": "Limits"
                                }
                            ],
                            "title": "Global CPU  Usage",
                            "transformations": [
                                {
                                "id": "calculateField",
                                "options": {
                                    "alias": "Real",
                                    "mode": "reduceRow",
                                    "reduce": {
                                    "include": [
                                        "Real Linux",
                                        "Real Windows"
                                    ],
                                    "reducer": "mean"
                                    }
                                }
                                },
                                {
                                "id": "organize",
                                "options": {
                                    "excludeByName": {
                                    "Real Linux": true,
                                    "Real Windows": true,
                                    "Time": true
                                    },
                                    "indexByName": {
                                    "Limits": 5,
                                    "Real": 1,
                                    "Real Linux": 2,
                                    "Real Windows": 3,
                                    "Requests": 4,
                                    "Time": 0
                                    },
                                    "renameByName": {}
                                }
                                }
                            ],
                            "type": "bargauge"
                            },
                            {
                            "datasource": {
                                "type": "prometheus",
                                "uid": "${datasource}"
                            },
                            "fieldConfig": {
                                "defaults": {
                                "color": {
                                    "mode": "palette-classic"
                                },
                                "custom": {
                                    "axisCenteredZero": false,
                                    "axisColorMode": "text",
                                    "axisLabel": "CPU %",
                                    "axisPlacement": "auto",
                                    "barAlignment": 0,
                                    "drawStyle": "line",
                                    "fillOpacity": 25,
                                    "gradientMode": "opacity",
                                    "hideFrom": {
                                    "legend": false,
                                    "tooltip": false,
                                    "viz": false
                                    },
                                    "lineInterpolation": "smooth",
                                    "lineWidth": 2,
                                    "pointSize": 5,
                                    "scaleDistribution": {
                                    "type": "linear"
                                    },
                                    "showPoints": "never",
                                    "spanNulls": false,
                                    "stacking": {
                                    "group": "A",
                                    "mode": "none"
                                    },
                                    "thresholdsStyle": {
                                    "mode": "off"
                                    }
                                },
                                "decimals": 2,
                                "mappings": [],
                                "thresholds": {
                                    "mode": "absolute",
                                    "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    },
                                    {
                                        "color": "red",
                                        "value": 80
                                    }
                                    ]
                                },
                                "unit": "percentunit"
                                },
                                "overrides": []
                            },
                            "gridPos": {
                                "h": 6,
                                "w": 9,
                                "x": 4,
                                "y": 11
                            },
                            "id": 54,
                            "options": {
                                "legend": {
                                "calcs": [
                                    "min",
                                    "max",
                                    "mean"
                                ],
                                "displayMode": "table",
                                "placement": "right",
                                "showLegend": true,
                                "sortBy": "Max",
                                "sortDesc": true
                                },
                                "tooltip": {
                                "hideZeros": false,
                                "mode": "single",
                                "sort": "none"
                                }
                            },
                            "pluginVersion": "11.6.1",
                            "targets": [
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "${datasource}"
                                },
                                "editorMode": "code",
                                "exemplar": true,
                                "expr": "avg(sum by (instance, cpu) (rate(node_cpu_seconds_total{mode!~\"idle|iowait|steal\", cluster=\"$cluster\", job=\"$job\"}[$__rate_interval]))) by (instance)",
                                "interval": "$resolution",
                                "legendFormat": "{{ node }}",
                                "range": true,
                                "refId": "Linux"
                                },
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "${datasource}"
                                },
                                "editorMode": "code",
                                "exemplar": true,
                                "expr": "avg(sum by (instance,core) (rate(windows_cpu_time_total{mode!=\"idle\", cluster=\"$cluster\"}[$__rate_interval]))) by (instance)",
                                "hide": false,
                                "interval": "$resolution",
                                "legendFormat": "{{ node }}",
                                "range": true,
                                "refId": "Windows"
                                }
                            ],
                            "title": "CPU Utilization by instance",
                            "type": "timeseries"
                            },
                            {
                            "datasource": {
                                "type": "prometheus",
                                "uid": "${datasource}"
                            },
                            "fieldConfig": {
                                "defaults": {
                                "mappings": [],
                                "noValue": "0",
                                "thresholds": {
                                    "mode": "absolute",
                                    "steps": [
                                    {
                                        "color": "rgb(255, 255, 255)",
                                        "value": null
                                    }
                                    ]
                                },
                                "unit": "none"
                                },
                                "overrides": []
                            },
                            "gridPos": {
                                "h": 6,
                                "w": 2,
                                "x": 13,
                                "y": 11
                            },
                            "id": 37,
                            "options": {
                                "colorMode": "none",
                                "graphMode": "none",
                                "justifyMode": "center",
                                "orientation": "auto",
                                "percentChangeColorMode": "standard",
                                "reduceOptions": {
                                "calcs": [
                                    "lastNotNull"
                                ],
                                "fields": "",
                                "values": false
                                },
                                "showPercentChange": false,
                                "text": {},
                                "textMode": "auto",
                                "wideLayout": true
                            },
                            "pluginVersion": "9.5.3",
                            "targets": [
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "${datasource}"
                                },
                                "editorMode": "code",
                                "exemplar": true,
                                "expr": "sum(rate(node_cpu_seconds_total{mode!~\"idle|iowait|steal\", cluster=\"$cluster\", job=\"$job\"}[$__rate_interval]))",
                                "interval": "",
                                "legendFormat": "Real Linux",
                                "range": true,
                                "refId": "Real Linux"
                                },
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "${datasource}"
                                },
                                "editorMode": "code",
                                "exemplar": true,
                                "expr": "sum(rate(windows_cpu_time_total{mode!=\"idle\", cluster=\"$cluster\"}[$__rate_interval]))",
                                "hide": false,
                                "interval": "",
                                "legendFormat": "Real Windows",
                                "range": true,
                                "refId": "Real Windows"
                                },
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "${datasource}"
                                },
                                "editorMode": "code",
                                "expr": "sum(kube_pod_container_resource_requests{resource=\"cpu\", cluster=\"$cluster\"})",
                                "hide": false,
                                "legendFormat": "Requests",
                                "range": true,
                                "refId": "Requests"
                                },
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "${datasource}"
                                },
                                "editorMode": "code",
                                "expr": "sum(kube_pod_container_resource_limits{resource=\"cpu\", cluster=\"$cluster\"})",
                                "hide": false,
                                "legendFormat": "Limits",
                                "range": true,
                                "refId": "Limits"
                                },
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "${datasource}"
                                },
                                "editorMode": "code",
                                "expr": "sum(machine_cpu_cores{cluster=\"$cluster\"})",
                                "hide": false,
                                "legendFormat": "Total",
                                "range": true,
                                "refId": "Total"
                                }
                            ],
                            "title": "CPU Usage",
                            "transformations": [
                                {
                                "id": "calculateField",
                                "options": {
                                    "alias": "Real",
                                    "mode": "reduceRow",
                                    "reduce": {
                                    "include": [
                                        "Real Linux",
                                        "Real Windows"
                                    ],
                                    "reducer": "sum"
                                    }
                                }
                                },
                                {
                                "id": "organize",
                                "options": {
                                    "excludeByName": {
                                    "Real Linux": true,
                                    "Real Windows": true,
                                    "Time": true,
                                    "Total Linux": true,
                                    "Total Windows": true
                                    },
                                    "indexByName": {
                                    "Limits": 5,
                                    "Real": 3,
                                    "Real Linux": 1,
                                    "Real Windows": 2,
                                    "Requests": 4,
                                    "Time": 0,
                                    "Total": 8,
                                    "Total Linux": 6,
                                    "Total Windows": 7
                                    },
                                    "renameByName": {}
                                }
                                }
                            ],
                            "type": "stat"
                            },
                            {
                            "datasource": {
                                "type": "prometheus",
                                "uid": "${datasource}"
                            },
                            "fieldConfig": {
                                "defaults": {
                                "color": {
                                    "mode": "palette-classic"
                                },
                                "custom": {
                                    "axisCenteredZero": false,
                                    "axisColorMode": "text",
                                    "axisLabel": "CPU CORES",
                                    "axisPlacement": "auto",
                                    "barAlignment": 0,
                                    "drawStyle": "line",
                                    "fillOpacity": 25,
                                    "gradientMode": "opacity",
                                    "hideFrom": {
                                    "legend": false,
                                    "tooltip": false,
                                    "viz": false
                                    },
                                    "lineInterpolation": "smooth",
                                    "lineStyle": {
                                    "fill": "solid"
                                    },
                                    "lineWidth": 2,
                                    "pointSize": 5,
                                    "scaleDistribution": {
                                    "type": "linear"
                                    },
                                    "showPoints": "never",
                                    "spanNulls": false,
                                    "stacking": {
                                    "group": "A",
                                    "mode": "none"
                                    },
                                    "thresholdsStyle": {
                                    "mode": "off"
                                    }
                                },
                                "decimals": 2,
                                "mappings": [],
                                "thresholds": {
                                    "mode": "absolute",
                                    "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    },
                                    {
                                        "color": "red",
                                        "value": 80
                                    }
                                    ]
                                },
                                "unit": "none"
                                },
                                "overrides": []
                            },
                            "gridPos": {
                                "h": 6,
                                "w": 9,
                                "x": 15,
                                "y": 11
                            },
                            "id": 46,
                            "options": {
                                "legend": {
                                "calcs": [
                                    "min",
                                    "max",
                                    "mean"
                                ],
                                "displayMode": "table",
                                "placement": "right",
                                "showLegend": true,
                                "sortBy": "Max",
                                "sortDesc": true
                                },
                                "tooltip": {
                                "hideZeros": false,
                                "mode": "single",
                                "sort": "none"
                                }
                            },
                            "pluginVersion": "11.6.1",
                            "targets": [
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "${datasource}"
                                },
                                "editorMode": "code",
                                "exemplar": true,
                                "expr": "sum(rate(container_cpu_usage_seconds_total{image!=\"\", cluster=\"$cluster\"}[$__rate_interval])) by (namespace)\n+ on (namespace)\n(sum(rate(windows_container_cpu_usage_seconds_total{container_id!=\"\", cluster=\"$cluster\"}[$__rate_interval]) * on (container_id) group_left (container, pod, namespace) max by ( container, container_id, pod, namespace) (kube_pod_container_info{container_id!=\"\", cluster=\"$cluster\"}) OR kube_namespace_created{cluster=\"$cluster\"} * 0) by (namespace))",
                                "format": "time_series",
                                "hide": false,
                                "interval": "$resolution",
                                "legendFormat": "{{ namespace }}",
                                "range": true,
                                "refId": "A"
                                }
                            ],
                            "title": "CPU Utilization by namespace",
                            "type": "timeseries"
                            },
                            {
                            "datasource": {
                                "type": "prometheus",
                                "uid": "${datasource}"
                            },
                            "fieldConfig": {
                                "defaults": {
                                "color": {
                                    "mode": "continuous-GrYlRd"
                                },
                                "decimals": 2,
                                "mappings": [],
                                "max": 1,
                                "min": 0,
                                "thresholds": {
                                    "mode": "percentage",
                                    "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    },
                                    {
                                        "color": "red",
                                        "value": 80
                                    }
                                    ]
                                },
                                "unit": "percentunit"
                                },
                                "overrides": []
                            },
                            "gridPos": {
                                "h": 5,
                                "w": 4,
                                "x": 0,
                                "y": 17
                            },
                            "id": 78,
                            "options": {
                                "displayMode": "lcd",
                                "legend": {
                                "calcs": [],
                                "displayMode": "list",
                                "placement": "bottom",
                                "showLegend": false
                                },
                                "maxVizHeight": 300,
                                "minVizHeight": 10,
                                "minVizWidth": 0,
                                "namePlacement": "auto",
                                "orientation": "horizontal",
                                "reduceOptions": {
                                "calcs": [
                                    "lastNotNull"
                                ],
                                "fields": "",
                                "values": false
                                },
                                "showUnfilled": true,
                                "sizing": "auto",
                                "text": {},
                                "valueMode": "color"
                            },
                            "pluginVersion": "9.5.3",
                            "targets": [
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "${datasource}"
                                },
                                "editorMode": "code",
                                "exemplar": true,
                                "expr": "sum(node_memory_MemTotal_bytes{cluster=\"$cluster\", job=\"$job\"} - node_memory_MemAvailable_bytes{cluster=\"$cluster\", job=\"$job\"}) / sum(node_memory_MemTotal_bytes{cluster=\"$cluster\", job=\"$job\"})",
                                "hide": false,
                                "interval": "",
                                "legendFormat": "Real Linux",
                                "range": true,
                                "refId": "Real Linux"
                                },
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "${datasource}"
                                },
                                "editorMode": "code",
                                "exemplar": true,
                                "expr": "sum(windows_memory_available_bytes{cluster=\"$cluster\"} + windows_memory_cache_bytes{cluster=\"$cluster\"}) / sum(windows_os_visible_memory_bytes{cluster=\"$cluster\"})",
                                "interval": "",
                                "legendFormat": "Real Windows",
                                "range": true,
                                "refId": "Real Windows"
                                },
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "${datasource}"
                                },
                                "editorMode": "code",
                                "expr": "sum(kube_pod_container_resource_requests{resource=\"memory\", cluster=\"$cluster\"}) / sum(machine_memory_bytes{cluster=\"$cluster\"})",
                                "hide": false,
                                "legendFormat": "Requests",
                                "range": true,
                                "refId": "Requests"
                                },
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "${datasource}"
                                },
                                "editorMode": "code",
                                "expr": "sum(kube_pod_container_resource_limits{resource=\"memory\", cluster=\"$cluster\"}) / sum(machine_memory_bytes{cluster=\"$cluster\"})",
                                "hide": false,
                                "legendFormat": "Limits",
                                "range": true,
                                "refId": "Limits"
                                }
                            ],
                            "title": "Global RAM Usage",
                            "transformations": [
                                {
                                "id": "calculateField",
                                "options": {
                                    "alias": "Real",
                                    "mode": "reduceRow",
                                    "reduce": {
                                    "include": [
                                        "Real Linux",
                                        "Real Windows"
                                    ],
                                    "reducer": "mean"
                                    }
                                }
                                },
                                {
                                "id": "organize",
                                "options": {
                                    "excludeByName": {
                                    "Real Linux": true,
                                    "Real Windows": true,
                                    "Time": true
                                    },
                                    "includeByName": {},
                                    "indexByName": {
                                    "Limits": 5,
                                    "Real": 3,
                                    "Real Linux": 1,
                                    "Real Windows": 2,
                                    "Requests": 4,
                                    "Time": 0
                                    },
                                    "renameByName": {}
                                }
                                }
                            ],
                            "type": "bargauge"
                            },
                            {
                            "datasource": {
                                "type": "prometheus",
                                "uid": "${datasource}"
                            },
                            "fieldConfig": {
                                "defaults": {
                                "color": {
                                    "mode": "palette-classic"
                                },
                                "custom": {
                                    "axisCenteredZero": false,
                                    "axisColorMode": "text",
                                    "axisLabel": "MEMORY",
                                    "axisPlacement": "auto",
                                    "barAlignment": 0,
                                    "drawStyle": "line",
                                    "fillOpacity": 25,
                                    "gradientMode": "opacity",
                                    "hideFrom": {
                                    "legend": false,
                                    "tooltip": false,
                                    "viz": false
                                    },
                                    "lineInterpolation": "smooth",
                                    "lineWidth": 2,
                                    "pointSize": 5,
                                    "scaleDistribution": {
                                    "type": "linear"
                                    },
                                    "showPoints": "never",
                                    "spanNulls": false,
                                    "stacking": {
                                    "group": "A",
                                    "mode": "none"
                                    },
                                    "thresholdsStyle": {
                                    "mode": "off"
                                    }
                                },
                                "mappings": [],
                                "thresholds": {
                                    "mode": "absolute",
                                    "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    },
                                    {
                                        "color": "red",
                                        "value": 80
                                    }
                                    ]
                                },
                                "unit": "bytes"
                                },
                                "overrides": []
                            },
                            "gridPos": {
                                "h": 5,
                                "w": 9,
                                "x": 4,
                                "y": 17
                            },
                            "id": 73,
                            "options": {
                                "legend": {
                                "calcs": [
                                    "min",
                                    "max",
                                    "mean"
                                ],
                                "displayMode": "table",
                                "placement": "right",
                                "showLegend": true,
                                "sortBy": "Max",
                                "sortDesc": true
                                },
                                "tooltip": {
                                "hideZeros": false,
                                "mode": "single",
                                "sort": "none"
                                }
                            },
                            "pluginVersion": "11.6.1",
                            "targets": [
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "${datasource}"
                                },
                                "editorMode": "code",
                                "exemplar": true,
                                "expr": "sum(node_memory_MemTotal_bytes{cluster=\"$cluster\", job=\"$job\"} - node_memory_MemAvailable_bytes{cluster=\"$cluster\", job=\"$job\"}) by (instance)",
                                "hide": false,
                                "interval": "$resolution",
                                "legendFormat": "{{ instance }}",
                                "range": true,
                                "refId": "Linux"
                                },
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "${datasource}"
                                },
                                "editorMode": "code",
                                "exemplar": true,
                                "expr": "sum(windows_os_visible_memory_bytes{cluster=\"$cluster\"} - windows_memory_available_bytes{cluster=\"$cluster\"}) by (instance)",
                                "hide": false,
                                "interval": "$resolution",
                                "legendFormat": "{{ instance }}",
                                "range": true,
                                "refId": "Windows"
                                }
                            ],
                            "title": "Memory Utilization by instance",
                            "type": "timeseries"
                            },
                            {
                            "datasource": {
                                "type": "prometheus",
                                "uid": "${datasource}"
                            },
                            "fieldConfig": {
                                "defaults": {
                                "mappings": [],
                                "noValue": "0",
                                "thresholds": {
                                    "mode": "absolute",
                                    "steps": [
                                    {
                                        "color": "rgb(255, 255, 255)",
                                        "value": null
                                    }
                                    ]
                                },
                                "unit": "bytes"
                                },
                                "overrides": []
                            },
                            "gridPos": {
                                "h": 5,
                                "w": 2,
                                "x": 13,
                                "y": 17
                            },
                            "id": 39,
                            "options": {
                                "colorMode": "none",
                                "graphMode": "none",
                                "justifyMode": "auto",
                                "orientation": "auto",
                                "percentChangeColorMode": "standard",
                                "reduceOptions": {
                                "calcs": [
                                    "lastNotNull"
                                ],
                                "fields": "",
                                "values": false
                                },
                                "showPercentChange": false,
                                "text": {},
                                "textMode": "auto",
                                "wideLayout": true
                            },
                            "pluginVersion": "9.5.3",
                            "targets": [
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "${datasource}"
                                },
                                "editorMode": "code",
                                "exemplar": true,
                                "expr": "sum(node_memory_MemTotal_bytes{cluster=\"$cluster\", job=\"$job\"} - node_memory_MemAvailable_bytes{cluster=\"$cluster\", job=\"$job\"})",
                                "interval": "",
                                "legendFormat": "Real Linux",
                                "range": true,
                                "refId": "Real Linux"
                                },
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "${datasource}"
                                },
                                "editorMode": "code",
                                "exemplar": true,
                                "expr": "sum(windows_os_visible_memory_bytes{cluster=\"$cluster\"} - windows_memory_available_bytes{cluster=\"$cluster\"} - windows_memory_cache_bytes{cluster=\"$cluster\"})",
                                "hide": false,
                                "interval": "",
                                "legendFormat": "Real Windows",
                                "range": true,
                                "refId": "Real Windows"
                                },
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "${datasource}"
                                },
                                "editorMode": "code",
                                "expr": "sum(kube_pod_container_resource_requests{resource=\"memory\", cluster=\"$cluster\"})",
                                "hide": false,
                                "legendFormat": "Requests",
                                "range": true,
                                "refId": "Requests"
                                },
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "${datasource}"
                                },
                                "editorMode": "code",
                                "expr": "sum(kube_pod_container_resource_limits{resource=\"memory\", cluster=\"$cluster\"})",
                                "hide": false,
                                "legendFormat": "Limits",
                                "range": true,
                                "refId": "Limits"
                                },
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "${datasource}"
                                },
                                "editorMode": "code",
                                "expr": "sum(machine_memory_bytes{cluster=\"$cluster\"})",
                                "hide": false,
                                "legendFormat": "Total",
                                "range": true,
                                "refId": "Total"
                                }
                            ],
                            "title": "RAM Usage",
                            "transformations": [
                                {
                                "id": "calculateField",
                                "options": {
                                    "alias": "Real",
                                    "mode": "reduceRow",
                                    "reduce": {
                                    "include": [
                                        "Real Linux",
                                        "Real Windows"
                                    ],
                                    "reducer": "mean"
                                    }
                                }
                                },
                                {
                                "id": "organize",
                                "options": {
                                    "excludeByName": {
                                    "Real Linux": true,
                                    "Real Windows": true,
                                    "Time": true
                                    },
                                    "includeByName": {},
                                    "indexByName": {
                                    "Limits": 5,
                                    "Real": 3,
                                    "Real Linux": 1,
                                    "Real Windows": 2,
                                    "Requests": 4,
                                    "Time": 0,
                                    "Total": 6
                                    },
                                    "renameByName": {}
                                }
                                }
                            ],
                            "type": "stat"
                            },
                            {
                            "datasource": {
                                "type": "prometheus",
                                "uid": "${datasource}"
                            },
                            "fieldConfig": {
                                "defaults": {
                                "color": {
                                    "mode": "palette-classic"
                                },
                                "custom": {
                                    "axisCenteredZero": false,
                                    "axisColorMode": "text",
                                    "axisLabel": "",
                                    "axisPlacement": "auto",
                                    "barAlignment": 0,
                                    "drawStyle": "line",
                                    "fillOpacity": 25,
                                    "gradientMode": "opacity",
                                    "hideFrom": {
                                    "legend": false,
                                    "tooltip": false,
                                    "viz": false
                                    },
                                    "lineInterpolation": "smooth",
                                    "lineWidth": 2,
                                    "pointSize": 5,
                                    "scaleDistribution": {
                                    "type": "linear"
                                    },
                                    "showPoints": "never",
                                    "spanNulls": false,
                                    "stacking": {
                                    "group": "A",
                                    "mode": "none"
                                    },
                                    "thresholdsStyle": {
                                    "mode": "off"
                                    }
                                },
                                "mappings": [],
                                "thresholds": {
                                    "mode": "absolute",
                                    "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    },
                                    {
                                        "color": "red",
                                        "value": 80
                                    }
                                    ]
                                },
                                "unit": "bytes"
                                },
                                "overrides": []
                            },
                            "gridPos": {
                                "h": 5,
                                "w": 9,
                                "x": 15,
                                "y": 17
                            },
                            "id": 50,
                            "options": {
                                "legend": {
                                "calcs": [
                                    "min",
                                    "max",
                                    "mean"
                                ],
                                "displayMode": "table",
                                "placement": "right",
                                "showLegend": true,
                                "sortBy": "Max",
                                "sortDesc": true
                                },
                                "tooltip": {
                                "hideZeros": false,
                                "mode": "single",
                                "sort": "none"
                                }
                            },
                            "pluginVersion": "11.6.1",
                            "targets": [
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "${datasource}"
                                },
                                "editorMode": "code",
                                "exemplar": true,
                                "expr": "sum(container_memory_working_set_bytes{image!=\"\", cluster=\"$cluster\"}) by (namespace)\n+ on (namespace)\n(sum(windows_container_memory_usage_commit_bytes{container_id!=\"\", cluster=\"$cluster\"} * on (container_id) group_left (container, pod, namespace) max by ( container, container_id, pod, namespace) (kube_pod_container_info{container_id!=\"\", cluster=\"$cluster\"}) OR kube_namespace_created{cluster=\"$cluster\"} * 0) by (namespace))",
                                "interval": "$resolution",
                                "legendFormat": "{{ namespace }}",
                                "range": true,
                                "refId": "A"
                                }
                            ],
                            "title": "Memory Utilization by namespace",
                            "type": "timeseries"
                            },
                            {
                            "datasource": {
                                "type": "prometheus",
                                "uid": "${datasource}"
                            },
                            "fieldConfig": {
                                "defaults": {
                                "color": {
                                    "mode": "palette-classic"
                                },
                                "custom": {
                                    "axisCenteredZero": false,
                                    "axisColorMode": "text",
                                    "axisLabel": "",
                                    "axisPlacement": "auto",
                                    "barAlignment": 0,
                                    "drawStyle": "line",
                                    "fillOpacity": 25,
                                    "gradientMode": "opacity",
                                    "hideFrom": {
                                    "legend": false,
                                    "tooltip": false,
                                    "viz": false
                                    },
                                    "lineInterpolation": "smooth",
                                    "lineWidth": 2,
                                    "pointSize": 5,
                                    "scaleDistribution": {
                                    "type": "linear"
                                    },
                                    "showPoints": "never",
                                    "spanNulls": false,
                                    "stacking": {
                                    "group": "A",
                                    "mode": "none"
                                    },
                                    "thresholdsStyle": {
                                    "mode": "off"
                                    }
                                },
                                "mappings": [],
                                "thresholds": {
                                    "mode": "absolute",
                                    "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    },
                                    {
                                        "color": "red",
                                        "value": 80
                                    }
                                    ]
                                },
                                "unit": "short"
                                },
                                "overrides": []
                            },
                            "gridPos": {
                                "h": 8,
                                "w": 9,
                                "x": 0,
                                "y": 22
                            },
                            "id": 52,
                            "options": {
                                "legend": {
                                "calcs": [
                                    "min",
                                    "max",
                                    "mean"
                                ],
                                "displayMode": "table",
                                "placement": "right",
                                "showLegend": true,
                                "sortBy": "Max",
                                "sortDesc": true
                                },
                                "tooltip": {
                                "hideZeros": false,
                                "mode": "multi",
                                "sort": "none"
                                }
                            },
                            "pluginVersion": "11.6.1",
                            "targets": [
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "${datasource}"
                                },
                                "exemplar": true,
                                "expr": "sum(kube_namespace_labels{cluster=\"$cluster\"})",
                                "interval": "",
                                "legendFormat": "Namespaces",
                                "refId": "A"
                                },
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "${datasource}"
                                },
                                "expr": "sum(kube_pod_container_status_running{cluster=\"$cluster\"})",
                                "interval": "",
                                "legendFormat": "Running Containers",
                                "refId": "B"
                                },
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "${datasource}"
                                },
                                "expr": "sum(kube_pod_status_phase{phase=\"Running\", cluster=\"$cluster\"})",
                                "interval": "",
                                "legendFormat": "Running Pods",
                                "refId": "O"
                                },
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "${datasource}"
                                },
                                "expr": "sum(kube_service_info{cluster=\"$cluster\"})",
                                "interval": "",
                                "legendFormat": "Services",
                                "refId": "C"
                                },
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "${datasource}"
                                },
                                "expr": "sum(kube_endpoint_info{cluster=\"$cluster\"})",
                                "interval": "",
                                "legendFormat": "Endpoints",
                                "refId": "D"
                                },
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "${datasource}"
                                },
                                "expr": "sum(kube_ingress_info{cluster=\"$cluster\"})",
                                "interval": "",
                                "legendFormat": "Ingresses",
                                "refId": "E"
                                },
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "${datasource}"
                                },
                                "expr": "sum(kube_deployment_labels{cluster=\"$cluster\"})",
                                "interval": "",
                                "legendFormat": "Deployments",
                                "refId": "F"
                                },
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "${datasource}"
                                },
                                "expr": "sum(kube_statefulset_labels{cluster=\"$cluster\"})",
                                "interval": "",
                                "legendFormat": "Statefulsets",
                                "refId": "G"
                                },
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "${datasource}"
                                },
                                "expr": "sum(kube_daemonset_labels{cluster=\"$cluster\"})",
                                "interval": "",
                                "legendFormat": "Daemonsets",
                                "refId": "H"
                                },
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "${datasource}"
                                },
                                "expr": "sum(kube_persistentvolumeclaim_info{cluster=\"$cluster\"})",
                                "interval": "",
                                "legendFormat": "Persistent Volume Claims",
                                "refId": "I"
                                },
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "${datasource}"
                                },
                                "expr": "sum(kube_hpa_labels{cluster=\"$cluster\"})",
                                "interval": "",
                                "legendFormat": "Horizontal Pod Autoscalers",
                                "refId": "J"
                                },
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "${datasource}"
                                },
                                "expr": "sum(kube_configmap_info{cluster=\"$cluster\"})",
                                "interval": "",
                                "legendFormat": "Configmaps",
                                "refId": "K"
                                },
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "${datasource}"
                                },
                                "expr": "sum(kube_secret_info{cluster=\"$cluster\"})",
                                "interval": "",
                                "legendFormat": "Secrets",
                                "refId": "L"
                                },
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "${datasource}"
                                },
                                "expr": "sum(kube_networkpolicy_labels{cluster=\"$cluster\"})",
                                "interval": "",
                                "legendFormat": "Network Policies",
                                "refId": "M"
                                },
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "${datasource}"
                                },
                                "exemplar": true,
                                "expr": "count(count by (node) (kube_node_info{cluster=\"$cluster\"}))",
                                "hide": false,
                                "interval": "",
                                "legendFormat": "Nodes",
                                "refId": "N"
                                }
                            ],
                            "title": "Kubernetes Resource Count",
                            "type": "timeseries"
                            },
                            {
                            "datasource": {
                                "type": "prometheus",
                                "uid": "${datasource}"
                            },
                            "fieldConfig": {
                                "defaults": {
                                "mappings": [],
                                "noValue": "0",
                                "thresholds": {
                                    "mode": "absolute",
                                    "steps": [
                                    {
                                        "color": "blue",
                                        "value": null
                                    }
                                    ]
                                }
                                },
                                "overrides": []
                            },
                            "gridPos": {
                                "h": 4,
                                "w": 2,
                                "x": 9,
                                "y": 22
                            },
                            "id": 62,
                            "options": {
                                "colorMode": "value",
                                "graphMode": "none",
                                "justifyMode": "auto",
                                "orientation": "auto",
                                "percentChangeColorMode": "standard",
                                "reduceOptions": {
                                "calcs": [
                                    "last"
                                ],
                                "fields": "",
                                "values": false
                                },
                                "showPercentChange": false,
                                "text": {},
                                "textMode": "value",
                                "wideLayout": true
                            },
                            "pluginVersion": "9.5.3",
                            "targets": [
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "${datasource}"
                                },
                                "expr": "sum(kube_pod_status_phase{phase=\"Running\", cluster=\"$cluster\"})",
                                "interval": "",
                                "legendFormat": "",
                                "refId": "A"
                                }
                            ],
                            "title": "Running Pods",
                            "type": "stat"
                            },
                            {
                            "datasource": {
                                "type": "prometheus",
                                "uid": "${datasource}"
                            },
                            "fieldConfig": {
                                "defaults": {
                                "color": {
                                    "mode": "palette-classic"
                                },
                                "custom": {
                                    "axisCenteredZero": false,
                                    "axisColorMode": "text",
                                    "axisLabel": "BANDWIDTH",
                                    "axisPlacement": "auto",
                                    "barAlignment": 0,
                                    "drawStyle": "line",
                                    "fillOpacity": 25,
                                    "gradientMode": "opacity",
                                    "hideFrom": {
                                    "legend": false,
                                    "tooltip": false,
                                    "viz": false
                                    },
                                    "lineInterpolation": "smooth",
                                    "lineWidth": 2,
                                    "pointSize": 5,
                                    "scaleDistribution": {
                                    "type": "linear"
                                    },
                                    "showPoints": "never",
                                    "spanNulls": false,
                                    "stacking": {
                                    "group": "A",
                                    "mode": "none"
                                    },
                                    "thresholdsStyle": {
                                    "mode": "off"
                                    }
                                },
                                "mappings": [],
                                "thresholds": {
                                    "mode": "absolute",
                                    "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    },
                                    {
                                        "color": "red",
                                        "value": 80
                                    }
                                    ]
                                },
                                "unit": "binBps"
                                },
                                "overrides": []
                            },
                            "gridPos": {
                                "h": 8,
                                "w": 6,
                                "x": 11,
                                "y": 22
                            },
                            "id": 79,
                            "options": {
                                "legend": {
                                "calcs": [],
                                "displayMode": "hidden",
                                "placement": "bottom",
                                "showLegend": false
                                },
                                "tooltip": {
                                "hideZeros": false,
                                "mode": "multi",
                                "sort": "desc"
                                }
                            },
                            "pluginVersion": "11.6.1",
                            "targets": [
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "${datasource}"
                                },
                                "editorMode": "code",
                                "exemplar": true,
                                "expr": "sum(rate(container_network_receive_bytes_total{cluster=\"$cluster\"}[$__rate_interval])) by (namespace)\n+ on (namespace)\n(sum(rate(windows_container_network_receive_bytes_total{container_id!=\"\", cluster=\"$cluster\"}[$__rate_interval]) * on (container_id) group_left (container, pod, namespace) max by ( container, container_id, pod, namespace) (kube_pod_container_info{container_id!=\"\", cluster=\"$cluster\"}) OR kube_namespace_created{cluster=\"$cluster\"} * 0) by (namespace))",
                                "interval": "$resolution",
                                "legendFormat": "Received : {{ namespace }}",
                                "range": true,
                                "refId": "A"
                                },
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "${datasource}"
                                },
                                "editorMode": "code",
                                "expr": "- (sum(rate(container_network_transmit_bytes_total{cluster=\"$cluster\"}[$__rate_interval])) by (namespace)\n+ on (namespace)\n(sum(rate(windows_container_network_transmit_bytes_total{container_id!=\"\", cluster=\"$cluster\"}[$__rate_interval]) * on (container_id) group_left (container, pod, namespace) max by ( container, container_id, pod, namespace) (kube_pod_container_info{container_id!=\"\", cluster=\"$cluster\"}) OR kube_namespace_created{cluster=\"$cluster\"} * 0) by (namespace)))",
                                "hide": false,
                                "interval": "$resolution",
                                "legendFormat": "Transmitted : {{ namespace }}",
                                "range": true,
                                "refId": "B"
                                }
                            ],
                            "title": "Network Received by namespace",
                            "type": "timeseries"
                            },
                            {
                            "datasource": {
                                "type": "prometheus",
                                "uid": "${datasource}"
                            },
                            "description": "Dropped noisy virtual devices for readability.",
                            "fieldConfig": {
                                "defaults": {
                                "color": {
                                    "mode": "palette-classic"
                                },
                                "custom": {
                                    "axisCenteredZero": false,
                                    "axisColorMode": "text",
                                    "axisLabel": "BANDWIDTH",
                                    "axisPlacement": "auto",
                                    "barAlignment": 0,
                                    "drawStyle": "line",
                                    "fillOpacity": 25,
                                    "gradientMode": "opacity",
                                    "hideFrom": {
                                    "legend": false,
                                    "tooltip": false,
                                    "viz": false
                                    },
                                    "lineInterpolation": "smooth",
                                    "lineWidth": 2,
                                    "pointSize": 5,
                                    "scaleDistribution": {
                                    "type": "linear"
                                    },
                                    "showPoints": "never",
                                    "spanNulls": false,
                                    "stacking": {
                                    "group": "A",
                                    "mode": "none"
                                    },
                                    "thresholdsStyle": {
                                    "mode": "off"
                                    }
                                },
                                "mappings": [],
                                "thresholds": {
                                    "mode": "absolute",
                                    "steps": [
                                    {
                                        "color": "green",
                                        "value": null
                                    },
                                    {
                                        "color": "red",
                                        "value": 80
                                    }
                                    ]
                                },
                                "unit": "binBps"
                                },
                                "overrides": []
                            },
                            "gridPos": {
                                "h": 8,
                                "w": 7,
                                "x": 17,
                                "y": 22
                            },
                            "id": 56,
                            "options": {
                                "legend": {
                                "calcs": [],
                                "displayMode": "hidden",
                                "placement": "bottom",
                                "showLegend": false
                                },
                                "tooltip": {
                                "hideZeros": false,
                                "mode": "multi",
                                "sort": "desc"
                                }
                            },
                            "pluginVersion": "11.6.1",
                            "targets": [
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "${datasource}"
                                },
                                "editorMode": "code",
                                "exemplar": true,
                                "expr": "sum(rate(node_network_receive_bytes_total{device!~\"(veth|azv|lxc|lo).*\", cluster=\"$cluster\", job=\"$job\"}[$__rate_interval])) by (instance)",
                                "interval": "$resolution",
                                "legendFormat": "Received bytes in {{ instance }}",
                                "range": true,
                                "refId": "A"
                                },
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "${datasource}"
                                },
                                "editorMode": "code",
                                "expr": "- sum(rate(node_network_transmit_bytes_total{device!~\"(veth|azv|lxc|lo).*\", cluster=\"$cluster\", job=\"$job\"}[$__rate_interval])) by (instance)",
                                "hide": false,
                                "interval": "$resolution",
                                "legendFormat": "Transmitted bytes in {{ instance }}",
                                "range": true,
                                "refId": "B"
                                },
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "${datasource}"
                                },
                                "editorMode": "code",
                                "exemplar": true,
                                "expr": "sum(rate(windows_net_bytes_received_total{nic!~\".*Virtual.*\",cluster=\"$cluster\"}[$__rate_interval])) by (instance)",
                                "hide": false,
                                "interval": "$resolution",
                                "legendFormat": "Received bytes in {{ instance }}",
                                "range": true,
                                "refId": "C"
                                },
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "${datasource}"
                                },
                                "editorMode": "code",
                                "exemplar": true,
                                "expr": "- sum(rate(windows_net_bytes_sent_total{nic!~\".*Virtual.*\",cluster=\"$cluster\"}[$__rate_interval])) by (instance)",
                                "hide": false,
                                "interval": "$resolution",
                                "legendFormat": "Transmitted bytes in {{ instance }}",
                                "range": true,
                                "refId": "D"
                                }
                            ],
                            "title": "Network Received (without loopback)  by instance",
                            "type": "timeseries"
                            },
                            {
                            "datasource": {
                                "type": "prometheus",
                                "uid": "${datasource}"
                            },
                            "fieldConfig": {
                                "defaults": {
                                "mappings": [],
                                "noValue": "0",
                                "thresholds": {
                                    "mode": "absolute",
                                    "steps": [
                                    {
                                        "color": "blue",
                                        "value": null
                                    }
                                    ]
                                }
                                },
                                "overrides": []
                            },
                            "gridPos": {
                                "h": 4,
                                "w": 2,
                                "x": 9,
                                "y": 26
                            },
                            "id": 63,
                            "options": {
                                "colorMode": "value",
                                "graphMode": "none",
                                "justifyMode": "auto",
                                "orientation": "auto",
                                "percentChangeColorMode": "standard",
                                "reduceOptions": {
                                "calcs": [
                                    "last"
                                ],
                                "fields": "",
                                "values": false
                                },
                                "showPercentChange": false,
                                "text": {},
                                "textMode": "value",
                                "wideLayout": true
                            },
                            "pluginVersion": "9.5.3",
                            "targets": [
                                {
                                "datasource": {
                                    "type": "prometheus",
                                    "uid": "${datasource}"
                                },
                                "editorMode": "code",
                                "exemplar": true,
                                "expr": "count(count by (node) (kube_node_info{cluster=\"$cluster\"}))",
                                "interval": "",
                                "legendFormat": "",
                                "range": true,
                                "refId": "A"
                                }
                            ],
                            "title": "Nodes",
                            "type": "stat"
                            }
                        ],
                        "refresh": "5s",
                        "schemaVersion": 38,
                        "style": "dark",
                        "tags": [],
                        "templating": {
                            "list": [
                            {
                                "current": {
                                "selected": false,
                                "text": "default",
                                "value": "default"
                                },
                                "hide": 0,
                                "includeAll": false,
                                "multi": false,
                                "name": "datasource",
                                "options": [],
                                "query": "prometheus",
                                "queryValue": "",
                                "refresh": 1,
                                "regex": "",
                                "skipUrlSync": false,
                                "type": "datasource"
                            },
                            {
                                "current": {
                                "isNone": true,
                                "selected": false,
                                "text": "None",
                                "value": ""
                                },
                                "datasource": {
                                "type": "prometheus",
                                "uid": "${datasource}"
                                },
                                "definition": "label_values(kube_node_info,cluster)",
                                "hide": 0,
                                "includeAll": false,
                                "multi": false,
                                "name": "cluster",
                                "options": [],
                                "query": {
                                "qryType": 1,
                                "query": "label_values(kube_node_info,cluster)",
                                "refId": "PrometheusVariableQueryEditor-VariableQuery"
                                },
                                "refresh": 1,
                                "regex": "",
                                "skipUrlSync": false,
                                "sort": 1,
                                "type": "query"
                            },
                            {
                                "current": {
                                "selected": true,
                                "text": "15s",
                                "value": "15s"
                                },
                                "hide": 0,
                                "includeAll": false,
                                "multi": false,
                                "name": "resolution",
                                "options": [
                                {
                                    "selected": false,
                                    "text": "1s",
                                    "value": "1s"
                                },
                                {
                                    "selected": true,
                                    "text": "15s",
                                    "value": "15s"
                                },
                                {
                                    "selected": false,
                                    "text": "30s",
                                    "value": "30s"
                                },
                                {
                                    "selected": false,
                                    "text": "1m",
                                    "value": "1m"
                                },
                                {
                                    "selected": false,
                                    "text": "3m",
                                    "value": "3m"
                                },
                                {
                                    "selected": false,
                                    "text": "5m",
                                    "value": "5m"
                                }
                                ],
                                "query": "1s, 15s, 30s, 1m, 3m, 5m",
                                "queryValue": "",
                                "skipUrlSync": false,
                                "type": "custom"
                            },
                            {
                                "current": {
                                "selected": true,
                                "text": [
                                    "node-exporter"
                                ],
                                "value": [
                                    "node-exporter"
                                ]
                                },
                                "datasource": {
                                "type": "prometheus",
                                "uid": "${datasource}"
                                },
                                "definition": "label_values(node_cpu_seconds_total{cluster=\"$cluster\"},job)",
                                "hide": 0,
                                "includeAll": false,
                                "multi": true,
                                "name": "job",
                                "options": [],
                                "query": {
                                "qryType": 1,
                                "query": "label_values(node_cpu_seconds_total{cluster=\"$cluster\"},job)",
                                "refId": "PrometheusVariableQueryEditor-VariableQuery"
                                },
                                "refresh": 1,
                                "regex": "",
                                "skipUrlSync": false,
                                "sort": 1,
                                "type": "query"
                            }
                            ]
                        },
                        "time": {
                            "from": "now-1h",
                            "to": "now"
                        },
                        "timepicker": {},
                        "timezone": "",
                        "title": "OUSSAMA CUSTOM DASHBOARD",
                        "uid": "f86f68c0-071d-49a4-bd98-d4cddfc359e3",
                        "version": 1,
                        "weekStart": ""
                        }